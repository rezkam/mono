// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: todo_items.sql

package sqlcgen

import (
	"context"
	"database/sql"
	"time"
)

const createTodoItem = `-- name: CreateTodoItem :exec
INSERT INTO todo_items (id, list_id, title, completed, create_time, due_time, tags)
VALUES ($1, $2, $3, $4, $5, $6, $7)
`

type CreateTodoItemParams struct {
	ID         string         `json:"id"`
	ListID     string         `json:"list_id"`
	Title      string         `json:"title"`
	Completed  int32          `json:"completed"`
	CreateTime time.Time      `json:"create_time"`
	DueTime    sql.NullTime   `json:"due_time"`
	Tags       sql.NullString `json:"tags"`
}

func (q *Queries) CreateTodoItem(ctx context.Context, arg CreateTodoItemParams) error {
	_, err := q.db.ExecContext(ctx, createTodoItem,
		arg.ID,
		arg.ListID,
		arg.Title,
		arg.Completed,
		arg.CreateTime,
		arg.DueTime,
		arg.Tags,
	)
	return err
}

const deleteTodoItem = `-- name: DeleteTodoItem :exec
DELETE FROM todo_items
WHERE id = $1 AND list_id = $2
`

type DeleteTodoItemParams struct {
	ID     string `json:"id"`
	ListID string `json:"list_id"`
}

func (q *Queries) DeleteTodoItem(ctx context.Context, arg DeleteTodoItemParams) error {
	_, err := q.db.ExecContext(ctx, deleteTodoItem, arg.ID, arg.ListID)
	return err
}

const deleteTodoItemsByListId = `-- name: DeleteTodoItemsByListId :exec
DELETE FROM todo_items
WHERE list_id = $1
`

func (q *Queries) DeleteTodoItemsByListId(ctx context.Context, listID string) error {
	_, err := q.db.ExecContext(ctx, deleteTodoItemsByListId, listID)
	return err
}

const getAllTodoItems = `-- name: GetAllTodoItems :many
SELECT id, list_id, title, completed, create_time, due_time, tags
FROM todo_items
ORDER BY list_id, create_time ASC
`

func (q *Queries) GetAllTodoItems(ctx context.Context) ([]TodoItem, error) {
	rows, err := q.db.QueryContext(ctx, getAllTodoItems)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []TodoItem{}
	for rows.Next() {
		var i TodoItem
		if err := rows.Scan(
			&i.ID,
			&i.ListID,
			&i.Title,
			&i.Completed,
			&i.CreateTime,
			&i.DueTime,
			&i.Tags,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getTodoItemsByListId = `-- name: GetTodoItemsByListId :many
SELECT id, list_id, title, completed, create_time, due_time, tags
FROM todo_items
WHERE list_id = $1
ORDER BY create_time ASC
`

func (q *Queries) GetTodoItemsByListId(ctx context.Context, listID string) ([]TodoItem, error) {
	rows, err := q.db.QueryContext(ctx, getTodoItemsByListId, listID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []TodoItem{}
	for rows.Next() {
		var i TodoItem
		if err := rows.Scan(
			&i.ID,
			&i.ListID,
			&i.Title,
			&i.Completed,
			&i.CreateTime,
			&i.DueTime,
			&i.Tags,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateTodoItem = `-- name: UpdateTodoItem :exec
UPDATE todo_items
SET title = $1, completed = $2, due_time = $3, tags = $4
WHERE id = $5 AND list_id = $6
`

type UpdateTodoItemParams struct {
	Title     string         `json:"title"`
	Completed int32          `json:"completed"`
	DueTime   sql.NullTime   `json:"due_time"`
	Tags      sql.NullString `json:"tags"`
	ID        string         `json:"id"`
	ListID    string         `json:"list_id"`
}

func (q *Queries) UpdateTodoItem(ctx context.Context, arg UpdateTodoItemParams) error {
	_, err := q.db.ExecContext(ctx, updateTodoItem,
		arg.Title,
		arg.Completed,
		arg.DueTime,
		arg.Tags,
		arg.ID,
		arg.ListID,
	)
	return err
}
